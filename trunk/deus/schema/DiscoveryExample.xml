<?xml version="1.0" encoding="UTF-8"?>
<aut:automator
	xmlns:aut="http://dsg.ce.unipr.it/software/deus/schema/automator"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://dsg.ce.unipr.it/software/deus/schema/automator automator.xsd ">


	<!-- *** EVENTS *** -->

	<aut:event id="nodeDeath" handler="DeathEvent" />
	<!-- when scheduled, deletes a node -->

	<aut:event id="nodeBirth" handler="BirthEvent"><!-- when scheduled, creates a new node -->
		<aut:events>
			<aut:reference id="nodeDeath" /><!-- event to be scheduled on created node -->
		</aut:events>
	</aut:event>

	<aut:event id="discovery" handler="DiscoveryEvent">
		<aut:params>
			<aut:param name="maxTTL" value="3" />
		</aut:params>
		<!-- questo evento genera altri eventi dello stesso tipo, senza usare alcun process 
			ma utilizzando ad es. i parametri di nodo (dovrÃ  esserci un check sul tipo di Node associato) -->
	</aut:event>


	<!-- *** NODE SPECIES *** -->

	<aut:node id="supernode" handler="SuperNode">
		<aut:params>
			<aut:param name="maxPeerview" value="100" />
			<aut:param name="downloadBandwidth" value="10" />
			<!-- Mbps -->
			<aut:param name="uploadBandwidth" value="2" /><!-- Mbps -->
			<aut:param name="CPU" value="2" /><!-- GHz -->
			<aut:param name="RAM" value="2048" /><!-- MB -->
		</aut:params>
	</aut:node>

	<!-- *** PROCESSES *** -->

	<!-- with 1/lambda = 50 and 1/lambda' = 20000, we have E[N] = 400 -->

	<aut:process id="poissonA" handler="PoissonProcess">
		<aut:params>
			<aut:param name="meanInterval" value="50" />
		</aut:params>
		<aut:nodes>
			<aut:reference id="supernode" /><!-- this is to associate the process to a specific type of nodes -->
		</aut:nodes>
		<aut:events>
			<aut:reference id="nodeBirth" />
		</aut:events>
	</aut:process>

	<aut:process id="poissonB" handler="PoissonProcess">
		<aut:params>
			<aut:param name="meanInterval" value="20000" />
		</aut:params>
		<aut:nodes>
			<aut:reference id="supernode" />
		</aut:nodes>
		<aut:events>
			<aut:reference id="nodeDeath" />
		</aut:events>
	</aut:process>

	<aut:process id="poissonC" handler="PoissonProcess">
		<aut:params>
			<aut:param name="meanInterval" value="100" />
		</aut:params>
		<aut:nodes>
			<aut:reference id="supernode" />
		</aut:nodes>
		<aut:events>
			<aut:reference id="discovery" />
		</aut:events>
	</aut:process>


	<!-- *** SIMULATION *** -->

	<aut:engine handler="DeterministicProcess" maxvt="100000"
		seed="123456789">
		<aut:processes>
			<aut:reference id="poissonA" />
			<!-- non ci metto poissonB, perche' voglio che quest'ultimo venga istanziato 
				ma i suoi eventi non siano schedulati dall'engine -->
			<aut:reference id="poissonC" />
		</aut:processes>
	</aut:engine>

</aut:automator>
